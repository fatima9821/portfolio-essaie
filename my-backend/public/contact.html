<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Nous contactez</title>
</head>
<body>
    <section class="contact" id="contact">
        <div class="titre noir">
            <h5 class="titre-texte"><span>F</span>ormulaire</h5>
            <h1>CONTACT</h1>
        </div>
        <form id="contact-form">
        <div class="contactfrom">
            <h3>Envoyez un message</h3>
            <div class="inputboite">
                <input type="text" id="fullname" name="fullname" placeholder="nom complet">
            </div>
            <div class="inputboite">
                <input type="text" id="email" name="email" placeholder="email">
            </div>
            <div class="inputboite">
                <textarea id="message" name="message" placeholder="message"></textarea>
            </div>
            <div class="inputboite">
                <input type="submit" value="Envoyez">
            </div>
        </div>
        </form>
    </section>
    <div class="pa">
        <h1><span class="h">H</span>oraire</h1>
    </div>
    <div class="pain">
        <p>12h – 15h et 19h 21h lundi au jeudi
        </p>
        <p>11h – 23h vendredi au dimanche</p>

        <h5>Le restaurant TUNDE by FATIMA</h5>
    </div>
    <script>
        // Sélectionner le formulaire de contact
        const contactForm = document.getElementById('contact-form');
        
        // Ajouter un événement pour gérer la soumission du formulaire
        contactForm.addEventListener('submit', async (event) => {
            event.preventDefault(); // Empêcher le rechargement de la page
    
            // Récupérer les valeurs des champs
            const fullname = document.getElementById('fullname').value;
            const email = document.getElementById('email').value;
            const message = document.getElementById('message').value;
    
            // Vérifier si tous les champs sont remplis
            if (!fullname || !email || !message) {
                alert('Tous les champs sont requis');
                return;
            }
    
            // Envoyer les données via Fetch API à ton back-end
            try {
                const response = await fetch('http://localhost:4011/contact', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ fullname, email, message })
                });
    
                const result = await response.text();
                if (response.ok) {
                    alert('Votre message a été envoyé avec succès !');
                    contactForm.reset();  // Réinitialiser le formulaire

                    window.location.href = 'merci.html'; 
                } else {
                    alert('Erreur : ' + result);
                }
            } catch (error) {
                console.error('Erreur lors de l\'envoi du message de contact', error);
                alert('Erreur lors de l\'envoi du message');
            }
        });
    </script>
    
</body>
</html>